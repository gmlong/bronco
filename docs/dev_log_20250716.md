1. 当用户在智能合约一端修改订单的情况,如取消订单.
   1. 限价单的完整形态的是可以允许用户下单的同时设定止盈和止损;也就是在成交之后,新增一个止盈和止损两个委托,或其中一个委托.
2. 在针对已有持仓,下单要卖出时,智能合约与交易程序的逻辑是什么?
3. 智能合约和交易程序要有紧急暂停机制:
   1. 智能合约钱包\券商账户两边或一边账户资金不足时;
   2. 以及未考虑到的各种突发情况,要暂停系统.
   3. 这种也应当是一个状态信号,反馈到智能合约一端,让客户知道;
   4. 智能合约暂停升级,交易程序暂停升级.
4. 单笔交易暂停
   1. 收到大额下单,暂停/需要人工确认和处理;
   2. 支付大额兑付，暂停/需要人工确认和处理;
   3. 以及未考虑到的各种突发情况,要暂停系统.
   4. 这种也应当是一个状态信号,反馈到智能合约一端,让客户知道;

5. 智能合约一端要考虑到延迟时间差;
   1. 如智能合约一侧取消一个限价单,应当是交易程序反馈取消成功,反馈到智能合约一端,让客户知道.
   2. 上述每一个状态都应该在智能合约一侧有所显示,让客户知道.
6. 每一个操作命令都应该有一组状态,反馈到智能合约一端,让客户知道.
   1. 以取消订单为例：
      1. 取消命令已发送
      2. 取消命令成功
      3. 取消命令失败
         1. 失败原因：

7. 智能合约不能直接和交易程序交互,要通过中转路由,并对信息进行加密;
   1. 未来会有多个账户;
   2. 未来以后一笔订单要随机拆分成多笔订单,由不同的账户来完成.

【place_order函数参数过多，应该区分买入和卖出；】

// 买入AAPLX
function deposit(uint256 usdtAmount) external returns (uint256 orderId);

// 卖出AAPLX  
function redeem(uint256 aaplxAmount) external returns (uint256 orderId);

1. 链上链下同步机制缺失
缺少订单ID映射：链上交易哈希 ↔ 富途订单ID
缺少状态同步机制：如何将交易结果反馈到链上？


// 链下系统回调，更新订单状态
function updateOrderStatus(
    uint256 orderId,
    OrderStatus status,
    uint256 executedPrice,
    uint256 executedQty
) external onlyOperator;

1. 风险控制不足
   1. 缺少紧急暂停交易的熔断机制/手动权限
   2. 缺少防重入攻击保护
2. 价格机制需要完善
   1. 汇率转换问题（USD/USDT）
3. 后端架构建议
   1. 增加熔断器模式，富途API故障时暂停服务
   2. 增加实时对账模块，确保链上链下资产一致
      1. 智能合约钱包余额+券商账户余额=本金恒定
      2. 铸造数量、销毁数量、券商账户持仓、券商账户已下单未成交








